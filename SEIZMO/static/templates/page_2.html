{% block content %}

{% if message %}
    <script type="text/javascript" language="JavaScript">
        alert("{{ message }}");
    </script>
{% endif %}

<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        /* 1. ë°°ê²½ ì´ë¯¸ì§€ë¥¼ '2.png'ë¡œ ì„¤ì • */
        background-image: url('{{ url_for("static", filename="assets/2.png") }}');
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center center;
        background-color: #ffffff;

        position: relative;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
    }

    /* 2. 'page_3.html'ì™€ ë™ì¼í•œ ì¹´ë©”ë¼ ëª¨ë“ˆ ìŠ¤íƒ€ì¼ */
    /* 2.pngì˜ ë¹ˆ ë„¤ëª¨ì¹¸ì— ìœ„ì¹˜í•©ë‹ˆë‹¤. */
    .camera-module-container {
        position: absolute;
        width: 84vw;
        max-width: 920px;
        height: 41vh;
        max-height: 700px;
        top: 15.6%;
        left: 50.5%;
        transform: translateX(-50%);
        background-color: #000000; /* ë¹„ë””ì˜¤ ë¡œë”© ì „ ê²€ì€ìƒ‰ ë°°ê²½ */
    }

    .camera-module-container video {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        object-fit: cover;
        transform: scaleX(-1); /* ì¢Œìš° ë°˜ì „ */
        filter: FlipH;
        z-index: 10;
    }

    /* 3. ğŸŒŸğŸŒŸğŸŒŸ ìš”ì²­í•˜ì‹  ìƒˆ ë²„íŠ¼ í¬ê¸° ë° ìœ„ì¹˜ ì ìš© ğŸŒŸğŸŒŸğŸŒŸ */
    .start-button-area {
        position: absolute;

        /* ë°©ê¸ˆ ì•Œë ¤ì£¼ì‹  ê°’ìœ¼ë¡œ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤ */
        width: 15vw;       /* ë²„íŠ¼ì˜ ë„ˆë¹„ */
        max-width: 200px;  /* ìµœëŒ€ ë„ˆë¹„ */
        height: 8vh;       /* ë²„íŠ¼ì˜ ë†’ì´ */
        max-height: 70px;  /* ìµœëŒ€ ë†’ì´ */

        bottom: 22vh;      /* ë°”ë‹¥ì—ì„œë¶€í„°ì˜ ê±°ë¦¬ */
        left: 50%;         /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
        transform: translateX(-50%); /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */

        cursor: pointer;
        background-color: transparent; /* íˆ¬ëª… */
        border: none;
        z-index: 20; /* ì¹´ë©”ë¼ ëª¨ë“ˆë³´ë‹¤ ìœ„ì— ìˆë„ë¡ */

        /* --- ë””ë²„ê¹…ìš© ---
           ë²„íŠ¼ ìœ„ì¹˜ë¥¼ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•˜ë ¤ë©´ ì•„ë˜ ì£¼ì„ì„ í•´ì œí•˜ì„¸ìš”.
        background-color: rgba(255, 0, 0, 0.3);
        */
    }

</style>

<body>

    <div class="camera-module-container">
        <video id="video" autoplay playsinline></video>
    </div>

    <a href="{{ url_for('page_3') }}" class="start-button-area">
        <span style="visibility: hidden;">ì´¬ì˜ ì‹œì‘í•˜ê¸°</span>
    </a>

</body>

<script>
// 6. í˜ì´ì§€ê°€ ë¡œë“œë˜ë©´ ì¦‰ì‹œ ì¹´ë©”ë¼ë¥¼ ì¼­ë‹ˆë‹¤.
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    navigator.mediaDevices.getUserMedia({ video: true }).then(function(stream) {
        var video = document.getElementById('video');
        if (video) {
            video.srcObject = stream;
        }
    }, function(err) {
        console.error("ì›¹ìº ì„ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ", err);
    });
} else {
    console.error("getUserMediaê°€ ì§€ì›ë˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.");
}
</script>

{% endblock %}